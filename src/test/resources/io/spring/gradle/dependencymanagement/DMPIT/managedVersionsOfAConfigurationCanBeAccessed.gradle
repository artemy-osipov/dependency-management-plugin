plugins {
	id "io.spring.dependency-management"
	id "java"
}

repositories {
	mavenCentral()
}

dependencyManagement {
	implementation {
		imports {
			mavenBom 'org.springframework.boot:spring-boot-dependencies:1.2.7.RELEASE'
		}
	}
}

task verify {
	def testImplementationManagedVersions = dependencyManagement.testImplementation.managedVersions
	def managedVersionsForTestImplementationConfiguration = dependencyManagement.getManagedVersionsForConfiguration(configurations.testImplementation)
	def testImplementationManagedVersionsOutput = new File("${buildDir}/managed-versions.txt")
	doFirst {
		testImplementationManagedVersionsOutput.parentFile.mkdirs()
		testImplementationManagedVersions.each { key, value ->
			testImplementationManagedVersionsOutput << "${key} -> ${value}\n"
		}
		assert managedVersionsForTestImplementationConfiguration.isEmpty()
	}
}
